# オイラーグラフ分類器 (標準モジュールのみ)

このPythonスクリプトは、与えられた無向グラフを、標準Pythonモジュールのみを使用して、オイラーグラフ、準オイラーグラフ、またはそのどちらでもないグラフとして分類します。

## アルゴリズムの説明

このスクリプトは、主に2つの性質に基づいてグラフの種類を判定します。それは**連結性**と**各頂点の次数**です。

### 1. グラフの表現

グラフは**隣接リスト**を使用して表現されます。これはPythonの `collections.defaultdict(list)` を用いて実装されています。グラフ内の各頂点に対して、隣接リストはその頂点に隣接する頂点のリストを格納します。関数 `build_adjacency_list(edges)` は、辺のリストを入力として受け取り、この隣接リストを構築します。グラフは無向グラフなので、頂点 `u` と `v` の間に辺が存在する場合、`v` は `u` の隣接リストに追加され、`u` は `v` の隣接リストに追加されます。

### 2. 連結性の確認

グラフがオイラーグラフまたは準オイラーグラフであるためには（孤立した頂点は除く。このスクリプトは辺によって形成される連結成分に焦点を当てることで暗黙的に処理します）、連結である必要があります。関数 `is_connected(adj)` は、隣接リスト `adj` で表現されたグラフの連結性を**深さ優先探索 (DFS)** を用いて確認します。

DFSアルゴリズムは、任意の頂点から開始し、バックトラックする前に可能な限り深く各枝を探索します。訪問済みの頂点を追跡し、探索が完了した後、訪問済みの頂点の数がグラフ内のすべての頂点（少なくとも1つの辺に接続されている頂点）の数と等しい場合、グラフは連結であると判断されます。

### 3. 頂点の次数

頂点の**次数**とは、その頂点に接続する辺の数です。隣接リスト表現では、頂点の次数は、その隣接リストの長さを調べることで簡単に得られます。

### 4. 分類ロジック

関数 `classify_eulerian_standard(edges)` は、以下のよく知られた定理に基づいて、主要な分類ロジックを実装しています。

* **オイラーグラフ:** 無向連結グラフがオイラー閉路（すべての辺をちょうど一度ずつ通る閉じた路）を持つための必要十分条件は、**すべての頂点の次数が偶数であること**です。
* **準オイラーグラフ:** 無向連結グラフがオイラー路（すべての辺をちょうど一度ずつ通る路だが、閉じていない）を持つための必要十分条件は、**ちょうど2つの頂点の次数が奇数であり**、他のすべての頂点の次数が偶数であることです。オイラー路は、一方の奇数次数の頂点から始まり、もう一方の奇数次数の頂点で終わります。
* **どちらでもないグラフ:** グラフが非連結である（かつ辺を持つ）場合、または奇数次数の頂点の数が0でも2でもない場合、そのグラフはオイラーグラフでも準オイラーグラフでもありません。

`classify_eulerian_standard` 関数は、以下の手順を実行します。

1.  入力された辺のリストから隣接リストを構築します。
2.  `is_connected` 関数を使用して、グラフが連結かどうかを確認します。連結でない場合は、「オイラーグラフでも準オイラーグラフでもありません (非連結)」と分類されます。
3.  グラフ内のすべての頂点を反復処理し、奇数次数の頂点の数をカウントします。
4.  奇数次数の頂点の数に基づいて、グラフを分類します。
    * カウントが0の場合、「オイラーグラフ」と分類されます。
    * カウントが2の場合、「準オイラーグラフ」と分類されます。
    * それ以外の場合、「オイラーグラフでも準オイラーグラフでもありません」と分類されます。

## 使い方

1.  このPythonコードを `.py` ファイル（例: `eulerian_classifier.py`）として保存します。
2.  `classify_eulerian_standard` 関数をインポートし、グラフを表す辺のリストとともに使用できます。

```python
from eulerian_classifier import classify_eulerian_standard

# オイラーグラフの例
edges1 = [(1, 2), (2, 3), (3, 4), (4, 1), (1, 3), (2, 4)]
print(f"グラフ 1: {classify_eulerian_standard(edges1)}")

# 準オイラーグラフの例
edges2 = [(1, 2), (2, 3), (3, 4), (4, 1), (1, 5), (4, 6)]
print(f"グラフ 2: {classify_eulerian_standard(edges2)}")

# どちらでもないグラフの例
edges3 = [(1, 2), (2, 3), (3, 1), (4, 5), (5, 6), (6, 4), (1, 4)]
print(f"グラフ 3: {classify_eulerian_standard(edges3)}")

# 非連結グラフの例
edges4 = [(1, 2), (2, 3)]
print(f"グラフ 4 (非連結): {classify_eulerian_standard(edges4)}")